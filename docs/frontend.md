# Frontend Admin Interface

This project includes a serverless admin interface built with React, deployed via CDK, and hosted on S3/CloudFront.

## Architecture

- **Framework**: React (Vite)
- **Styling**: TailwindCSS
- **Authentication**: AWS Cognito (User Pool + Identity Pool)
- **Hosting**: S3 Bucket (Private) served via CloudFront (HTTPS)
- **API**: API Gateway connected to the backend Lambdas

## Setup & Deployment

The frontend requires configuration values (UserPoolId, API URL, etc.) that are generated by the CDK deployment. Therefore, setting up the frontend is a multi-step process.

### 1. Prerequisites

Ensure you have installed the project dependencies:
- Node.js & npm
- Python 3.11+
- AWS CDK CLI

### 2. Initial Infrastructure Deployment

Deploy the CDK stack to create the resources. This will create the S3 bucket, CloudFront distribution, and Cognito pools.

```bash
cd cdk
python3 -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
cdk deploy
```

*Note: The first deployment will upload default/placeholder assets to the S3 bucket.*

### 3. Configure Frontend

Use the helper script to fetch the deployed resource IDs and configure the frontend `.env` file automatically.

```bash
# Run from the project root
python3 scripts/update_frontend_config.py
```

This will create/update `frontend/.env` with:
- `VITE_USER_POOL_ID`
- `VITE_USER_POOL_CLIENT_ID`
- `VITE_IDENTITY_POOL_ID`
- `VITE_API_URL`
- `VITE_REGION`

### 4. Build Frontend

Navigate to the frontend directory and build the application.

```bash
cd frontend
npm install
npm run build
```

This compiles the React application into the `frontend/dist` directory.

### 5. Deploy Assets

Run `cdk deploy` again. The `BucketDeployment` construct will detect the changes in `frontend/dist` and upload the new assets to the S3 bucket.

```bash
cd ../cdk
cdk deploy
```

## Accessing the Admin Interface

1. Get the **Website URL** from the CDK outputs (e.g., `CurioLambdaStack.CurioFrontendWebsiteUrl...`).
2. Open the URL in your browser.
3. Sign up for a new account using the ephemeral email flow.
4. Sign in to access the dashboard.

## Local Development

You can run the frontend locally while connecting to the deployed AWS backend.

1.  **Configure Environment**:
    Run the update script to generate the `.env` file (if you haven't already):
    ```bash
    python3 scripts/update_frontend_config.py
    ```

2.  **Start Dev Server**:
    ```bash
    cd frontend
    npm run dev
    ```

3.  **Open in Browser**:
    Navigate to `http://localhost:5173`.
    
    *Note: The local app will connect to the **real** Cognito User Pool and API Gateway deployed in your AWS account.*

